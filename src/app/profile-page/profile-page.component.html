<link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />

<div id="container" class="container mx-auto my-60 rounded-3xl shadow-lg sm:max-w-6xl sm:mx-auto">
    <div>

        <div class="bg-white relative rounded-lg w-5/6 md:w-5/6 lg:w-4/6 xl:w-3/6 mx-auto">
            <div class="flex justify-center">
                <img src="../assets/images/0icon3.svg"
                    class="rounded-full mx-auto absolute -top-20 w-32 h-32 shadow-xl border-4 border-white transition duration-200 transform hover:scale-110">
            </div>

            <div class="mt-16">
                <h1 class="font-bold text-center text-3xl text-gray-900"> {{loggedInUsername}} </h1>
                <p class="text-center text-sm text-gray-400 font-medium"> Role: {{role}}</p>

                <mat-tab-group mat-align-tabs="center">


                    <mat-tab *ngIf="role == 'ADMIN' " id="admin-panel">

                        <ng-template mat-tab-label>

                            <img src="https://img.icons8.com/ios-filled/26/null/repository.png" /> Created quizes

                        </ng-template>

                        <div class="font-bold text-center text-3xl text-gray-900 mt-7 mb-7">
                            Your quizes:
                        </div>

                        <div *ngIf="allTeacherQuizes.length == 0"
                            class="font-bold text-center items-center text-xl text-gray-400 mt-7 mb-7">
                            <img id="alert-icon" src="https://img.icons8.com/wired/64/808080/repository.png" />
                            You have not created any quiz yet!
                        </div>

                        <div class="justify-center mx-auto ">
                            <mat-spinner *ngIf="contentLoaded" id="spinner"> </mat-spinner>
                        </div>

                        <div *ngIf="allTeacherQuizes.length > 0">


                            <div id="quizCard" *ngFor="let quiz of allTeacherQuizes">

                                <h1 class="font-bold text-center text-3xl text-gray-900"> {{quiz.name}} </h1>
                                <h2 class="text-center text-gray-400 font-medium"> {{quiz.description}} </h2>


                                <div id="button-holder">

                                    <button id="button" type="button" routerLink="/admin-quiz-detail/{{quiz.name}}"
                                        class="py-[3.5px] px-2 mb-3 mr-3 font-semibold transition ease-in duration-200 transform hover:-translate-y-1 active:translate-y-0"
                                        (click)="sendId(quiz)">
                                        <mat-icon>info</mat-icon>
                                    </button>


                                    <button id="button" type="button" (click)="copyText(quiz.name)"
                                        [ngClass]="{'icon-A': !isCopied, 'icon-B': isCopied}"
                                        class="py-[3.5px] px-2 mb-3 mr-3 font-semibold transition ease-in duration-200 transform hover:-translate-y-1 active:translate-y-0">
                                        <mat-icon>{{ isCopied ? 'check_circle' : 'share' }}</mat-icon>
                                    </button>


                                    <button id="button" type="button" (click)="openDialog(quiz.name)"
                                        class="py-[3.5px] px-2 mb-3 mr-3 font-semibold  transition ease-in duration-200 transform hover:-translate-y-1 active:translate-y-0">
                                        <mat-icon>delete</mat-icon>
                                    </button>

                                    <button id="button" type="button" routerLink="/edit-quiz"
                                        class="py-[3.5px] px-2 mb-3 font-semibold  transition ease-in duration-200 transform hover:-translate-y-1 active:translate-y-0">
                                        <mat-icon>edit</mat-icon>
                                    </button>

                                </div>

                            </div>
                        </div>

                    </mat-tab>


                    <mat-tab *ngIf="role == 'USER' " id="userResults-tab">

                        <ng-template mat-tab-label>

                            <img src="https://img.icons8.com/ios-glyphs/24/null/repository.png" /> Your Results

                        </ng-template>

                        <div class="font-bold text-center text-3xl text-gray-900 mt-7 mb-7">
                            You have already done these quizzes:
                        </div>

                        <div *ngIf="allUserQuizes.length == 0"
                            class="font-bold text-center text-xl text-gray-400 mt-7 mb-7">
                            <img id="alert-icon" src="https://img.icons8.com/wired/64/808080/repository.png" />
                            You have not done any quiz yet!
                        </div>

                        <div class="justify-center mx-auto ">
                            <mat-spinner *ngIf="contentLoaded" id="spinner"> </mat-spinner>
                        </div>

                        <div *ngIf="allUserQuizes.length > 0">

                            <div id="quizCard" *ngFor="let quiz of allUserQuizes">

                                <h1 class=" text-center text-3xl text-gray-900"> {{quiz.name}} </h1>
                                <h2 class="text-center text-gray-700 font-medium"> {{quiz.description}} </h2>
                                <div id="service-bar">
                                    <h3 class="text-center text-gray-400 font-medium"> Creator: {{quiz.creatorName}} |
                                    </h3>
                                    <h3 id="date" class="text-center text-gray-400 font-medium"> {{quiz.date | date:
                                        "medium"}} </h3>
                                </div>



                                <div id="button-holder">

                                    <button id="button" type="button"
                                        routerLink="/user-quiz-detail/{{quiz.resultQuizIds}}"
                                        class="py-[3.5px] px-2 mb-3 mr-3 font-semibold transition ease-in duration-200 transform hover:-translate-y-1 active:translate-y-0"
                                        (click)="sendId(quiz)">
                                        Your results
                                    </button>

                                </div>

                            </div>
                        </div>


                    </mat-tab>

                    <mat-tab *ngIf="role == 'GUEST' " id="guest-tab">

                        <ng-template mat-tab-label>

                            <img src="https://img.icons8.com/ios-glyphs/24/null/repository.png" /> Your Results

                        </ng-template>

                        <div *ngIf="allUserQuizes.length > 0">

                            <div id="quizCard-blurred" *ngFor="let quiz of allUserQuizes">

                                <h1 class=" text-center text-3xl text-gray-900"> {{quiz.name}} </h1>
                                <h2 class="text-center text-gray-700 font-medium"> {{quiz.description}} </h2>
                                <div id="service-bar">
                                    <h3 class="text-center text-gray-400 font-medium"> Creator: {{quiz.creatorName}} |
                                    </h3>
                                    <h3 id="date" class="text-center text-gray-400 font-medium"> {{quiz.date | date:
                                        "medium"}} </h3>
                                </div>



                                <div id="button-holder">

                                    <button id="button" type="button"
                                        routerLink="/user-quiz-detail/{{quiz.resultQuizIds}}"
                                        class="py-[3.5px] px-2 mb-3 mr-3 font-semibold transition ease-in duration-200 transform hover:-translate-y-1 active:translate-y-0"
                                        (click)="sendId(quiz)">
                                        Your results
                                    </button>

                                </div>

                            </div>
                        </div>

                        <div
                            style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;">
                            <h1 class="text-center text-3xl text-gray-900">
                                <mat-icon>lock</mat-icon> <br>
                                If you want to see your results, you have to add email and password.

                                <button id="button" type="button" routerLink="/guest-form"
                                    class="py-[3.5px] px-2 mt-5 mr-3 font-semibold transition ease-in duration-200 transform hover:-translate-y-1 active:translate-y-0">
                                    Here
                                </button>

                            </h1>
                        </div>


                    </mat-tab>

                    <mat-tab id="changePassw-tab">

                        <ng-template mat-tab-label>

                            <mat-icon>refresh</mat-icon> Change password

                        </ng-template>

                        <form #resendMail="ngForm" (ngSubmit)="sendPasswEmailChange()" class="form-group">

                            <div class="text-center text-xl text-gray-900">
                                If you want to change your password write here your email.
                            </div>


                            <div class="form-group">

                                <mat-form-field id="input" class="h-10 w-full" appearance="outline">
                                    <mat-label>Email</mat-label>
                                    <input matInput required type="email" name="email" [(ngModel)]="model.email"
                                        #email="ngModel"
                                        pattern="^[_A-Za-z0-9-+]+(.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(.[A-Za-z0-9]+)*(.[A-Za-z]{2,})$">
                                    <mat-icon matSuffix>alternate_email</mat-icon>
                                </mat-form-field>

                                <div id="resendMail" class="relative">
                                    <button id="resendMail-button" type="submit" [disabled]="!resendMail.form.valid"
                                        class="py-2 px-8 font-semibold  transition ease-in duration-200 transform hover:-translate-y-1 active:translate-y-0">
                                        Send
                                    </button>
                                </div>

                            </div>

                        </form>


                    </mat-tab>

                    <mat-tab id="changePassw-tab">

                        <ng-template mat-tab-label>

                            <mat-icon>help</mat-icon> Support

                        </ng-template>

                        <form #supportForm="ngForm" (ngSubmit)="sendSupport()" class="form-group">

                            <div class="text-center text-xl text-gray-900">
                                Found some issue? Let us know about it, write here your problem.
                            </div>


                            <div class="form-group">

                                <mat-form-field class="h-10 w-full" appearance="outline">
                                    <mat-label>Your issue</mat-label>
                                    <textarea matInput required type="text" name="problem"
                                        [(ngModel)]="modelSendSupport.problem">  </textarea>
                                    <mat-icon matSuffix>sentiment_very_satisfied</mat-icon>
                                </mat-form-field>


                                <div id="resendMail" class="relative">
                                    <button id="resendMail-button" type="submit" [disabled]="!supportForm.valid"
                                        class="py-2 px-8 font-semibold  transition ease-in duration-200 transform hover:-translate-y-1 active:translate-y-0">
                                        Send
                                    </button>
                                </div>

                            </div>

                        </form>


                    </mat-tab>

                </mat-tab-group>


            </div>
        </div>

    </div>
</div>